<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.4">Jekyll</generator><link href="https://wittawasw.com/feed.xml" rel="self" type="application/atom+xml" /><link href="https://wittawasw.com/" rel="alternate" type="text/html" /><updated>2024-11-22T04:32:18+07:00</updated><id>https://wittawasw.com/feed.xml</id><title type="html">wittawasw</title><subtitle></subtitle><author><name>wittawasw</name><email>your-email@domain.com</email></author><entry><title type="html">การเลือกใช้งาน UUID</title><link href="https://wittawasw.com/2024/11/22/uuid-diff-and-when-to-use.html" rel="alternate" type="text/html" title="การเลือกใช้งาน UUID" /><published>2024-11-22T04:01:00+07:00</published><updated>2024-11-22T04:01:00+07:00</updated><id>https://wittawasw.com/2024/11/22/uuid-diff-and-when-to-use</id><content type="html" xml:base="https://wittawasw.com/2024/11/22/uuid-diff-and-when-to-use.html"><![CDATA[<h2 id="uuid-คืออะไร">UUID คืออะไร</h2>

<p>ค่าที่ใช้เป็นรหัสอ้างอิงแทน resource ในระบบ โดยหลักในการออกแบบ UUID คือ
การสร้างรหัสจะต้องไม่มีตัวกลางในการสร้าง (centralized) เพื่อลดต้นทุนการบริหารจัดการ
โดยที่ยังคงไว้ด้วยความสามารถในการสร้างรหัสที่ไม่ซ้ำกันและเก็บไว้ใช้อ้างอิงต่อได้
ซึ่งในเวลาต่อมาก็ได้รับความนิยมนำไปใช้เป็น คียหลัก(PK)ของระบบฐานข้อมูล
ตามความต้องการของฐานข้อมูลในปัจจุบันที่เน้นการกระจายศูนย์มากขึ้น</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ตัวอย่าง:</span>
e5c01d00-0cc6-41a9-86ef-91dab8b92219

<span class="c"># 8 ตัว - 4 ตัว - 4 ตัว - 4 ตัว - 12 ตัว</span>
<span class="c"># รวมทั้งหมด 32 ตัว = 128 bits</span>
</code></pre></div></div>

<h2 id="เวอร์ชันต่างๆ">เวอร์ชันต่างๆ</h2>

<p>Spec ของ UUID ในปัจจุบันมีระบุไว้แบบชัดเจนทั้ง 7 เวอร์ชันด้วยกัน
โดยในซอฟต์แวร์ปัจจุบัน นิยมใช้เวอร์ชันที่ 4 (UUID 4) เริ่มต้น และใช้เวอร์ชันที่ 7
(UUID 7) ที่พัฒนามาเพื่อให้ทำงานร่วมกับระบบฐานข้อมูลได้ดีขึ้น</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ตัวอย่าง: UUID 4 ()</span>
e07d07cb-afe4-4402-be35-dc431fc02764

<span class="c"># ตัวอย่าง: UUID 7</span>
0193503d-d8d0-7ae0-beca-c005478f5650

<span class="c"># ตัวเลขหลักที่ 13 คือ เลขเวอร์ชัน</span>
</code></pre></div></div>

<h2 id="เลือกใช้-v4-หรือ-v7">เลือกใช้ V4 หรือ V7</h2>

<p>UUID 4 ที่ออกมาก่อน ถูกสร้างขึ้นมาโดยไม่ได้คิดเผื่อให้ใช้งานร่วมกับระบบฐานข้อมูล
จึงมีปัญหาในเรื่องของการไม่สามารถเรียงตามลำดับก่อน-หลัง (sorting order)
ทำให้ไม่สามารถใช้ร่วมกับการทำ index เพื่อค้นหาด้วยโครงสร้างข้อมูลแบบต้นไม้ (Tree)
ตามแบบที่ระบบฐานข้อมูลส่วนมากใช้ได้</p>

<p>เวลาต่อมาจึงได้มีการทำ UUID 6 เพื่อปรับปรุงเรื่องของการทำงานร่วมกับระบบฐานข้อมูล
แล้วก็ได้ UUID 7 ที่เป็นเวอร์ชันที่อ้างอิงการเรียงลำดับจากการนับเลขนาฬิกาของระบบ
Unix (Epoch Time) เพื่อให้สามารถทำงานร่วมกับระบบฐานข้อมูลได้ดี</p>

<blockquote>
  <p>ก็คือถ้าขึ้นระบบใหม่ให้ใช้ UUID 7 เป็นค่าตั้งต้น</p>
</blockquote>

<h2 id="v8">V8</h2>

<p>UUID 8 คือ เวอร์ชันที่กำหนดไว้เป็นปลายเปิดให้สามารถเลือกประยุกต์ใช้การกำหนดค่า
เพื่อเปิดทางให้สามารถกำหนดการใช้งานได้ยืดหยุ่นมากขึ้นและยังสามารถใช้งานร่วมกับ
UUID อื่นได้</p>

<p>ยกตัวอย่าง เช่น รูปแบบ UUID 8 ของ <a href="https://pkg.go.dev/github.com/samborkent/uuidv8#section-readme">Go library</a>
ที่ออกแบบมาให้รองรับการสร้างรหัสที่มีความละเอียดของเวลามากกว่า UUID 7
โดย UUID 7 ที่อ้างอิงการนับเวลาของ UNIX ที่มีความละเอียดระดับ 1 millisecond
ให้มีความถี่สูงขึ้นเป็นระดับ 20 microsecond เพื่อให้สามารถสร้างรหัสได้จำนวนมากกว่า
ภายในระยะเวลาที่เท่ากัน</p>

<h2 id="ค่าว่างและคู่ตรงข้าม">ค่าว่างและคู่ตรงข้าม</h2>

<p>หากอยากใส่ในระบบว่าข้อมูลนี้เป็น UUID ที่เป็น ค่าว่างให้ใส่เลข 0 แทนเลขทุกตำแหน่ง</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ระบบฐานข้อมูลนิยมใส่ค่านี้ให้ หากเราเลือกประเภทข้อมูลเป็น UUID แต่ปล่อยว่าง</span>
00000000-0000-0000-0000-000000000000
</code></pre></div></div>
<p>และหากต้องการมี placeholder เพื่อระบุว่าข้อมูลในส่วนนี้ต้องเป็น UUID ก็อาจะเลือกใช้
ค่าสูงสุดที่อยู่ตรงข้ามกับค่าว่างแทน</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># คู่ตรงข้ามหรือค่าสูงสุด ก็คือ F ที่เป็นค่าสูงสุดของเลขฐาน 16</span>
FFFFFFFF-FFFF-FFFF-FFFF-FFFFFFFFFFFF
</code></pre></div></div>]]></content><author><name>wittawasw</name><email>your-email@domain.com</email></author><category term="uuid" /><category term="rfc" /><summary type="html"><![CDATA[ค่าที่ใช้เป็นรหัสอ้างอิงแทน resource ในระบบ โดยหลักในการออกแบบ UUID คือ การสร้างรหัสจะต้องไม่มีตัวกลางในการสร้าง (centralized) เพื่อลดต้นทุนการบริหารจัดการ โดยที่ยังคงไว้ด้วยความสามารถในการสร้างรหัสที่ไม่ซ้ำกันและเก็บไว้ใช้อ้างอิงต่อได้ ซึ่งในเวลาต่อมาก็ได้รับความนิยมนำไปใช้เป็น คียหลัก(PK)ของระบบฐานข้อมูล ตามความต้องการของฐานข้อมูลในปัจจุบันที่เน้นการกระจายศูนย์มากขึ้น]]></summary></entry><entry><title type="html">Choosing UUIDs for Use</title><link href="https://wittawasw.com/2024/11/22/uuid-diff-and-when-to-use-en.html" rel="alternate" type="text/html" title="Choosing UUIDs for Use" /><published>2024-11-22T04:01:00+07:00</published><updated>2024-11-22T04:01:00+07:00</updated><id>https://wittawasw.com/2024/11/22/uuid-diff-and-when-to-use-en</id><content type="html" xml:base="https://wittawasw.com/2024/11/22/uuid-diff-and-when-to-use-en.html"><![CDATA[<h2 id="what-is-a-uuid">What is a UUID?</h2>

<p>A UUID serves as a reference code for resources in a system. Its design principle
emphasizes decentralization in code generation to reduce management overhead while
ensuring unique, reusable identifiers.
Over time, UUIDs have become a popular choice as primary keys (PK) in databases,
supporting the shift towards distributed systems.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Example:</span>
e5c01d00-0cc6-41a9-86ef-91dab8b92219

<span class="c"># Format: 8-4-4-4-12 characters</span>
<span class="c"># Total: 32 characters = 128 bits</span>
</code></pre></div></div>

<h2 id="the-different-versions">The Different Versions</h2>

<p>The UUID specification has 7 well-defined versions, with version 4 and 7 as
the most commonly used in recent software development.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Example: UUID 4</span>
e07d07cb-afe4-4402-be35-dc431fc02764

<span class="c"># Example: UUID 7</span>
0193503d-d8d0-7ae0-beca-c005478f5650

<span class="c"># The 13th digit indicates the version.</span>
</code></pre></div></div>

<h2 id="choosing-between-v4-and-v7">Choosing Between V4 and V7</h2>

<p>UUID 4 was not originally designed with databases in mind,
which resulted in difficulties with sorting and indexing. Because
UUID 4 doesn’t have a natural ordering, making them unsuitable for use with
tree-based data structures like B-trees or binary search trees,
which are used in most opensource databases. Since all UUID 4 are randomly
generated, their insertion into such trees can result in inefficient storage
and slower query performance.</p>

<p>To address these issues, UUID 6 was introduced, and later UUID 7,
which relies on Unix Epoch Time for sequential ordering.
This makes UUID 7 ideal for databases.</p>

<blockquote>
  <p>Use UUID 7 as the default. If you’re starting a new system.</p>
</blockquote>

<h2 id="v8">V8</h2>

<p>UUID 8 is an open-ended version designed for customization and flexibility
while remaining compatible with other UUIDs.</p>

<p>For example, the  <a href="https://pkg.go.dev/github.com/samborkent/uuidv8#section-readme">Go library</a>
introduces UUID 8 with more time granularity compared to UUID 7. While UUID 7
use 1 millisecond precision, UUID 8 from this lib increases it to 20 microseconds,
enabling more IDs to be generated in the same timeframe.</p>

<h2 id="null-and-the-opposite">Null and The Opposite</h2>

<p>If you need to represent an empty UUID in your system, use all zeros.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Commonly used by databases for empty UUIDs:</span>
00000000-0000-0000-0000-000000000000
</code></pre></div></div>

<p>Conversely, you can use the maximum value as a placeholder for fields
requiring a UUID.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Opposite or maximum value:</span>
FFFFFFFF-FFFF-FFFF-FFFF-FFFFFFFFFFFF
</code></pre></div></div>]]></content><author><name>wittawasw</name><email>your-email@domain.com</email></author><category term="uuid" /><category term="rfc" /><summary type="html"><![CDATA[UUIDs are reference codes used to represent resources in a system. Designed to eliminate the need for a central authority when generating them, they reduce management costs while maintaining uniqueness and traceability. Over time, they have gained popularity as primary keys (PK) in databases, catering to the modern need for distributed systems.]]></summary></entry><entry><title type="html">การสร้าง outline ให้ PDF เวลา export เอกสารจาก MS Words</title><link href="https://wittawasw.com/2024/10/21/pdf-outline-ms-words.html" rel="alternate" type="text/html" title="การสร้าง outline ให้ PDF เวลา export เอกสารจาก MS Words" /><published>2024-10-21T16:54:00+07:00</published><updated>2024-10-21T16:54:00+07:00</updated><id>https://wittawasw.com/2024/10/21/pdf-outline-ms-words</id><content type="html" xml:base="https://wittawasw.com/2024/10/21/pdf-outline-ms-words.html"><![CDATA[<p>ช่วงนี้ได้กลับมาทำงานเอกสารบ้าง แล้วก็ได้เห็นว่าหลายคนที่ทำงานด้วย ยังใช้ MS
Words แบบที่ไม่ format หัวข้อกับไม่ได้คิดเผื่อให้สามารถทำ outline ในไฟล์ PDF
เพื่อให้สะดวกกับเลื่อนไปอ่านหัวข้อตามที่ต้องการแบบเร็วๆ</p>

<h2 id="outline-ของ-pdf">Outline ของ PDF</h2>

<p>ก็เหมือนกับสารบัญที่โปรแกรมอ่าน PDF ส่วนใหญ่จะขึ้นไว้ที่แถบทางซ้าย มักจะอยู่คนล่ะ
panel กับเนื้อหาเอกสารทำให้สะดวกกว่า สารบัญที่สร้างขึ้นโดย MS Words
ที่จะอยู่แค่หน้าแรกๆแล้วก็รวมอยู่ในเอกสารเลย</p>

<p><img src="/images/post/pdf-outline.png" alt="pdf-outline" /></p>

<h2 id="การ-export-ไฟล์-pdf-จาก-ms-words">การ export ไฟล์ PDF จาก MS Words</h2>

<p>เลือก <code class="language-plaintext highlighter-rouge">Create Bookmarks using: Heading</code> ก่อน (ถ้าเคยเลือกแล้ว ครั้งต่อไปก็ไม่ต้องกดอีก)</p>

<blockquote>
  <p>Google Doc ยังทำไม่ได้</p>
</blockquote>

<p><img src="/images/post/pdf-outline-mswords-option.png" alt="pdf-outline-ms-words" /></p>]]></content><author><name>wittawasw</name><email>your-email@domain.com</email></author><category term="documentation" /><category term="msword" /><category term="pdf" /><summary type="html"><![CDATA[ช่วงนี้ได้กลับมาทำงานเอกสารบ้าง แล้วก็ได้เห็นว่าหลายคนที่ทำงานด้วย ยังใช้ MS Words แบบที่ไม่ format หัวข้อกับไม่ได้คิดเผื่อให้สามารถทำ outline ในไฟล์ PDF เพื่อให้สะดวกกับเลื่อนไปอ่านหัวข้อตามที่ต้องการแบบเร็วๆ]]></summary></entry><entry><title type="html">Install Google Chrome ใน wsl2 Ubuntu</title><link href="https://wittawasw.com/2024/10/18/install-google-chrome-in-wsl2-ubuntu.html" rel="alternate" type="text/html" title="Install Google Chrome ใน wsl2 Ubuntu" /><published>2024-10-18T10:34:00+07:00</published><updated>2024-10-18T10:34:00+07:00</updated><id>https://wittawasw.com/2024/10/18/install-google-chrome-in-wsl2-ubuntu</id><content type="html" xml:base="https://wittawasw.com/2024/10/18/install-google-chrome-in-wsl2-ubuntu.html"><![CDATA[<p>เจอ error นี้ระหว่างที่กำลังจะใช้ CLI ในการรันคำสั่งที่ต้องเรียก Chrome ออกมาใช้
แล้วก็ได้รู้ว่า wsl2 มันยังไม่ฉลาดพอที่จะเรียกใช้ Chrome จาก Windows ให้เอง
ซึ่งก็ไม่แปลกอะไร ก็เลยได้ลอง install Chrome ให้ใช้ได้ด้วยโปรแกรมที่เป็น CLI ดู</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[  WARN ] The CHROME_PATH environment variable must be set to a Chrome/Chromium executable no older than Chrome stable.
[ ERROR ] You have to install Google Chrome, Chromium, or Microsoft Edge.
</code></pre></div></div>

<p>ลองพยายามแบบสั้นๆ เร็วๆดู</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
<span class="nb">sudo </span>apt <span class="nt">-y</span> <span class="nb">install</span> ./google-chrome-stable_current_amd64.deb
</code></pre></div></div>

<p>เจอ error</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>N: Download is performed unsandboxed as root as file '/home/wittawasw/honeypot/wittawasw.github.io/google-chrome-stable_current_amd64.deb' couldn't be accessed by user '_apt'. - pkgAcquire::Run (13: Permission denied)
</code></pre></div></div>

<p>แปล error ออกมาได้ว่า path ที่เราใช้อยู่ ไม่สามารถเข้าถึงได้ด้วย user _apt
เพราะฉะนั้นเราก็แค่ต้องย้ายไฟล์ .deb ไป execute ที่ไหนก็ได้ที่ _apt สามารถเข้าถึงได้
จะสร้างใหม่แล้ว chown ก็ได้ แต่ที่ /tmp ก็เป็นที่ที่ดีที่จะเอาของวางชั่วคราวแล้วก็มีอยู่แล้ว
ไม่ต้องสร้างใหม่</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mv </span>google-chrome-stable_current_amd64.deb /tmp
<span class="nb">cd</span> /tmp
<span class="nb">sudo </span>apt <span class="nt">-y</span> <span class="nb">install</span> ./google-chrome-stable_current_amd64.deb

<span class="c"># ลบไฟล์ทิ้งแล้วตรวจดูว่าที่ install ไป คือ chrome version อะไร</span>
<span class="nb">rm </span>google-chrome-stable_current_amd64.deb
google-chrome <span class="nt">--version</span>
</code></pre></div></div>

<p>เรียกใช้งานได้ แต่ให้แสดงผลไม่ได้ จะติด error</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[648041:648140:1018/101730.158350:ERROR:object_proxy.cc(576)] Failed to call method: org.freedesktop.UPower.EnumerateDevices: object_path= /org/freedesktop/UPower: org.freedesktop.DBus.Error.ServiceUnknown: The name org.freedesktop.UPower was not provided by any .service files
glx: failed to create drisw screen
</code></pre></div></div>

<p>ถ้าพยายามไปต่อจากนี้ติดปัญหาหลายอย่างที่คิดว่า ยังไม่คุ้มที่จะทำ บวกกับยังไม่ต้องการดูผลลัพธ์ของ Chrome แต่แค่ต้องการเอามารัน CLI ก็เลยปล่อยไปแค่นี้</p>]]></content><author><name>wittawasw</name><email>your-email@domain.com</email></author><category term="chrome" /><category term="cli" /><category term="ubuntu" /><category term="wsl2" /><summary type="html"><![CDATA[เจอ error นี้ระหว่างที่กำลังจะใช้ CLI ในการรันคำสั่งที่ต้องเรียก Chrome ออกมาใช้ แล้วก็ได้รู้ว่า wsl2 มันยังไม่ฉลาดพอที่จะเรียกใช้ Chrome จาก Windows ให้เอง ซึ่งก็ไม่แปลกอะไร ก็เลยได้ลอง install Chrome ให้ใช้ได้ด้วยโปรแกรมที่เป็น CLI ดู]]></summary></entry><entry><title type="html">Install torch-rb บน Ubuntu</title><link href="https://wittawasw.com/2024/10/08/install-torch-rb-in-ubuntu.html" rel="alternate" type="text/html" title="Install torch-rb บน Ubuntu" /><published>2024-10-08T12:18:00+07:00</published><updated>2024-10-08T12:18:00+07:00</updated><id>https://wittawasw.com/2024/10/08/install-torch-rb-in-ubuntu</id><content type="html" xml:base="https://wittawasw.com/2024/10/08/install-torch-rb-in-ubuntu.html"><![CDATA[<p>แก้ไขเพิ่มเติมจาก <a href="https://github.com/ankane/torch.rb">readme ของ torch-rb</a></p>

<h2 id="ดาวน์โหลดไฟล์-libtorch">ดาวน์โหลดไฟล์ libtorch</h2>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># หา version ล่าสุดจากในนี้</span>
<span class="c"># https://download.pytorch.org/libtorch/cpu/</span>
<span class="c"># ใช้ cxxx-11 สำหรับ CPU</span>
<span class="c"># กับเวอร์ชั่นล่าสุดตอนที่เขียนคือ 2.4.1</span>
curl <span class="nt">-L</span> https://download.pytorch.org/libtorch/cpu/libtorch-cxx11-abi-shared-with-deps-2.4.1%2Bcpu.zip <span class="o">&gt;</span> libtorch.zip

unzip <span class="nt">-q</span> libtorch.zip
<span class="c"># rm libtorch.zip # Optional</span>
</code></pre></div></div>

<h2 id="install-ผ่าน-gemfile">Install ผ่าน Gemfile</h2>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bundle config build.torch-rb <span class="nt">--with-torch-dir</span><span class="o">=</span>/path/to/libtorch
bundle add torch-rb

<span class="c"># สามารถใช้ $(pwd)/relative_path/to/libtorch กับ --with-torch-dir ได้</span>
<span class="c"># เช่น bundle config build.torch-rb --with-torch-dir=$(pwd)/libtorch</span>
<span class="c"># หรือตั้งค่าเป็น global ด้วย</span>
<span class="c"># bundle config --global build.torch-rb --with-torch-dir=$(pwd)/libtorch</span>
</code></pre></div></div>]]></content><author><name>wittawasw</name><email>your-email@domain.com</email></author><category term="ruby" /><category term="ml" /><summary type="html"><![CDATA[แก้ไขเพิ่มเติมจาก readme ของ torch-rb]]></summary></entry><entry><title type="html">เปลี่ยน git merge ไปใช้ diff3</title><link href="https://wittawasw.com/2024/10/06/git-diff-3.html" rel="alternate" type="text/html" title="เปลี่ยน git merge ไปใช้ diff3" /><published>2024-10-06T03:48:00+07:00</published><updated>2024-10-06T03:48:00+07:00</updated><id>https://wittawasw.com/2024/10/06/git-diff-3</id><content type="html" xml:base="https://wittawasw.com/2024/10/06/git-diff-3.html"><![CDATA[<p>ตั้งใจจะเปิดหาบทความที่สอนการดู <code class="language-plaintext highlighter-rouge">diff</code> ของ <code class="language-plaintext highlighter-rouge">git merge</code> เพราะปกติไม่เคยอธิบาย
เป็นคำพูดให้คนอื่นฟังเข้าใจได้เลย มีแต่ต้องทำให้ดู แล้วก็เพิ่งรู้ว่ามีแบบที่เข้าใจได้ง่ายกว่า เรียกว่า <code class="language-plaintext highlighter-rouge">diff3</code> ให้ใช้มาตั้งหลายปีแล้ว</p>

<h2 id="คำสั่งในการใช้เปลี่ยนรูปแบบ">คำสั่งในการใช้เปลี่ยนรูปแบบ</h2>

<p>ลองทำตามได้เลย ยังไม่ต้องรู้เรื่องก็ได้ เพราะมั่นใจว่าไม่เสียใจแน่นอน</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git config <span class="nt">--global</span> merge.conflictstyle diff3

<span class="c"># หรือถ้าไม่แน่ใจก็ลองแค่ directory เดียวก่อน</span>
git config merge.conflictstyle diff3
</code></pre></div></div>

<p>ที่มา: <a href="https://stackoverflow.com/questions/27417656/should-diff3-be-default-conflictstyle-on-git">stackoverflow.com/questions/27417656</a></p>

<h2 id="ตัวอย่างของ-diff-จากการแก้-code">ตัวอย่างของ <code class="language-plaintext highlighter-rouge">diff</code> จากการแก้ code</h2>

<h3 id="ของเดิม">ของเดิม</h3>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="n">CalculateTotal</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="อันที่เราแก้-head-current-change">อันที่เราแก้ (HEAD, Current Change)</h3>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="n">CalculateTotal</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="m">10</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="อันที่คนอื่นแก้มาแล้วเรากำลังจะ-merge-เข้า-incoming-change">อันที่คนอื่นแก้มาแล้วเรากำลังจะ merge เข้า (Incoming Change)</h3>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="n">CalculateTotal</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">-</span> <span class="m">5</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="ได้ออกมาแบบนี้ตอน-conflict">ได้ออกมาแบบนี้ตอน conflict</h3>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="n">CalculateTotal</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
<span class="o">&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span> <span class="n">HEAD</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="m">10</span>
<span class="o">=======</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">-</span> <span class="m">5</span>
<span class="o">&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span> <span class="n">branch</span><span class="o">-</span><span class="n">name</span>
<span class="p">}</span>
</code></pre></div></div>

<blockquote>
  <p>หลายๆครั้งเวลาเจอแบบนี้ในลักษณะที่ conflict กันหลายบรรทัด จะค่อนข้างสับสนพอสมควรว่าควรจะเลือกอันไหนดี</p>
</blockquote>

<h3 id="ถ้าใช้-diff3-จะได้-conflict-แบบนี้แทน">ถ้าใช้ <code class="language-plaintext highlighter-rouge">diff3</code> จะได้ conflict แบบนี้แทน:</h3>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="n">CalculateTotal</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
<span class="o">&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span> <span class="n">HEAD</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="m">10</span>
<span class="o">|||||||</span> <span class="n">base</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="o">=======</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">-</span> <span class="m">5</span>
<span class="o">&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span> <span class="n">branch</span><span class="o">-</span><span class="n">name</span>
<span class="p">}</span>
</code></pre></div></div>

<blockquote>
  <p>สังเกตได้ว่าแทนที่จะมีแค่สองสถานะให้เรางงว่าจะเลือกอันไหนดี <code class="language-plaintext highlighter-rouge">diff3</code> จะเพิ่มสถานะ
<code class="language-plaintext highlighter-rouge">base</code> เข้ามาด้วยเพื่อให้เห็นว่าจุดตั้งต้นก่อนที่จะ conflict มันคืออะไรมาก่อน
เพื่อช่วยเพิ่มข้อมูลตัดสินใจว่าควรจะเลือกอันไหนดี</p>
</blockquote>]]></content><author><name>wittawasw</name><email>your-email@domain.com</email></author><category term="devtool" /><category term="git" /><summary type="html"><![CDATA[ตั้งใจจะเปิดหาบทความที่สอนการดู diff ของ git merge เพราะปกติไม่เคยอธิบายเป็นคำพูดให้คนอื่นฟังเข้าใจได้เลย มีแต่ต้องทำให้ดู แล้วก็เพิ่งรู้ว่ามีแบบที่เข้าใจง่ายกว่า เรียกว่า diff3 ให้ใช้มาตั้งหลายปีแล้ว]]></summary></entry><entry><title type="html">การตั้งค่า .gitignore สำหรับทุก git directory ในเครื่อง</title><link href="https://wittawasw.com/2024/09/27/setup-global-gitignore.html" rel="alternate" type="text/html" title="การตั้งค่า .gitignore สำหรับทุก git directory ในเครื่อง" /><published>2024-09-27T12:57:00+07:00</published><updated>2024-09-27T12:57:00+07:00</updated><id>https://wittawasw.com/2024/09/27/setup-global-gitignore</id><content type="html" xml:base="https://wittawasw.com/2024/09/27/setup-global-gitignore.html"><![CDATA[<p>บันทึกไว้ว่าในเครื่องมี <code class="language-plaintext highlighter-rouge">gitignore</code> อะไรบ้าง</p>

<h2 id="คำสั่งที่ใช้">คำสั่งที่ใช้</h2>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># สั่งให้ใช้ไฟล์ ~/.gitignore เป็น reference</span>
git config <span class="nt">--global</span> core.excludesFile <span class="s1">'~/.gitignore'</span>
</code></pre></div></div>

<h2 id="ไฟล์-gitignore">ไฟล์ <code class="language-plaintext highlighter-rouge">.gitignore</code></h2>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Environment Variables</span>
.env
.rbenv-vars

<span class="c"># Python</span>
__pycache__

<span class="c"># Node</span>
node_modules
npm-debug.log

<span class="c"># Dart, FLutter</span>
<span class="k">**</span>/doc/api/
<span class="k">**</span>/ios/Flutter/.last_build_id
.dart_tool/
.flutter-plugins
.flutter-plugins-dependencies
.pub-cache/
.pub/
/build/

<span class="c"># Editor</span>
<span class="k">*</span>.iml
<span class="k">*</span>.ipr
<span class="k">*</span>.iws
.idea/

<span class="c"># scratchpad เอาไว้ note สิ่งที่ต้องทำ, สิ่งที่กำลังทำ , ฯลฯ</span>
todo
todo.txt

<span class="c"># Mac</span>
.DS_Store

<span class="c"># Windows</span>
Thumbs.db

</code></pre></div></div>]]></content><author><name>wittawasw</name><email>your-email@domain.com</email></author><category term="devtool" /><category term="git" /><summary type="html"><![CDATA[บันทึกไว้ว่าในเครื่องมี gitignore อะไรบ้าง]]></summary></entry><entry><title type="html">ใช้ timedatectl ตั้งค่า datetime ในเครื่อง Ubuntu</title><link href="https://wittawasw.com/2024/09/27/set-datetime-in-ubuntu.html" rel="alternate" type="text/html" title="ใช้ timedatectl ตั้งค่า datetime ในเครื่อง Ubuntu" /><published>2024-09-27T12:57:00+07:00</published><updated>2024-09-27T12:57:00+07:00</updated><id>https://wittawasw.com/2024/09/27/set-datetime-in-ubuntu</id><content type="html" xml:base="https://wittawasw.com/2024/09/27/set-datetime-in-ubuntu.html"><![CDATA[<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ดูเวลาปัจจุบันที่ตั้งไว้</span>
timedatectl
<span class="c">#                Local time: Fri 2024-09-27 12:13:31 +07</span>
<span class="c">#            Universal time: Fri 2024-09-27 05:13:31 UTC</span>
<span class="c">#                  RTC time: Fri 2024-09-27 05:13:31</span>
<span class="c">#                 Time zone: Asia/Bangkok (+07, +0700)</span>
<span class="c"># System clock synchronized: yes</span>
<span class="c">#               NTP service: active</span>
<span class="c">#           RTC in local TZ: no</span>

<span class="c"># ตั้งให้ sync อัตโนมัติผ่าน internet</span>
timedatectl set-ntp <span class="nb">yes
</span>timedatectl set-ntp no

<span class="c"># date - YYYY-MM-DD</span>
timedatectl set-time 2024-03-31
<span class="c"># time - HH:MM:SS</span>
timedatectl set-time 12:11:12

<span class="c"># การตั้ง timezone</span>
timedatectl list-timezones
timedatectl set-timezone <span class="s2">"&lt;ชื่อ timezone ที่ได้มา&gt;"</span>
timedatectl set-timezone UTC
</code></pre></div></div>]]></content><author><name>wittawasw</name><email>your-email@domain.com</email></author><category term="unix" /><category term="cli" /><category term="ubuntu" /><category term="timedatectl" /><summary type="html"><![CDATA[```sh ดูเวลาปัจจุบันที่ตั้งไว้ timedatectl Local time: Fri 2024-09-27 12:13:31 +07 Universal time: Fri 2024-09-27 05:13:31 UTC RTC time: Fri 2024-09-27 05:13:31 Time zone: Asia/Bangkok (+07, +0700) System clock synchronized: yes NTP service: active RTC in local TZ: no]]></summary></entry><entry><title type="html">ลองเทียบ performance ของการใช้ฟังก์ชัน COALESCE กับ IS NULL ใน SQL</title><link href="https://wittawasw.com/2024/09/08/sql-between-performance.html" rel="alternate" type="text/html" title="ลองเทียบ performance ของการใช้ฟังก์ชัน COALESCE กับ IS NULL ใน SQL" /><published>2024-09-08T16:24:00+07:00</published><updated>2024-09-08T16:24:00+07:00</updated><id>https://wittawasw.com/2024/09/08/sql-between-performance</id><content type="html" xml:base="https://wittawasw.com/2024/09/08/sql-between-performance.html"><![CDATA[<p>วันก่อนเห็นน้องในทีมส่งข้อความหากันเองในกลุ่มที่ทำงานเป็น query ด้วย <code class="language-plaintext highlighter-rouge">Gorm</code> หน้าตาประมาณ</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">query</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">Where</span><span class="p">(</span><span class="s">"? BETWEEN c.effective_at AND COALESCE(c.expire_at,  ?)"</span><span class="p">,</span> <span class="n">effected_time</span><span class="p">,</span> <span class="n">effected_time</span><span class="o">.</span><span class="n">AddDate</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">))</span>
</code></pre></div></div>

<p>พอเห็นแล้วอดไม่ได้ที่จะแนะนำว่าเช็คถ้า <code class="language-plaintext highlighter-rouge">IS NULL</code> ก่อนก็สามารถทำได้เหมือนกัน ถ้าอยากได้ query ที่รองรับ
เผื่อกรณีที่ <code class="language-plaintext highlighter-rouge">expire_at</code> สามารถเป็น <code class="language-plaintext highlighter-rouge">NULL</code> ได้แบบนี้</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">query</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">Where</span><span class="p">(</span><span class="s">"c.effective_at &lt;= ? AND (c.expire_at IS NULL OR c.expire_at &gt; ?)"</span><span class="p">,</span> <span class="n">effected_time</span><span class="p">,</span> <span class="n">effected_time</span><span class="p">)</span>
</code></pre></div></div>

<p>เพราะในหัวตอนนั้น เข้าใจว่าการใช้ ฟังก์ชันแบบ <code class="language-plaintext highlighter-rouge">COALESCE</code> น่าจะได้ performance
ที่แย่กว่าเพราะถือเป็นค่าใหม่ ที่ไม่ได้ถูกทำ index เอาไว้</p>

<p>ก็เลยได้ลองเขียน script เก็บไว้ดูเลยว่ามันจะดีกว่าขนาดไหน แต่เท่าที่ดูจากผลลัพธ์ก็ได้ค่าเฉลี่ยที่ไม่ต่างกันเท่าไหร่ ซึ่งอาจจะเพราะ scale ยังเป็นแค่ db ขนาดเล็กด้วย โดยเทียบผลลัพธ์ทั้งแบบที่มี index และไม่มี index บน SQLite3</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># no index</span>
Query 1 - BETWEEN: 68.308µs, IS NULL/OR: 36.579µs
Query 2 - BETWEEN: 25.68µs, IS NULL/OR: 22.227µs
Query 3 - BETWEEN: 26.301µs, IS NULL/OR: 23.961µs
Query 4 - BETWEEN: 25.267µs, IS NULL/OR: 23.52µs

-&gt; BETWEEN Query - Avg: 24.118µs, Max: 68.308µs, Min: 22.626µs
-&gt; IS NULL/OR Query - Avg: 21.933µs, Max: 28.717µs, Min: 20.758µs
</code></pre></div></div>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#  index expire_at</span>
Query 1 - BETWEEN: 35.829µs, IS NULL/OR: 34.539µs
Query 2 - BETWEEN: 20.68µs, IS NULL/OR: 20.437µs
Query 3 - BETWEEN: 16.351µs, IS NULL/OR: 17.691µs
Query 4 - BETWEEN: 15.277µs, IS NULL/OR: 16.92µs
<span class="nb">.</span>
<span class="nb">.</span>
Query 57 - BETWEEN: 14.785µs, IS NULL/OR: 16.027µs
Query 58 - BETWEEN: 14.753µs, IS NULL/OR: 17.613µs
Query 59 - BETWEEN: 14.972µs, IS NULL/OR: 16.867µs
Query 60 - BETWEEN: 15.153µs, IS NULL/OR: 16.241µs
Query 61 - BETWEEN: 14.869µs, IS NULL/OR: 16.411µs
Query 62 - BETWEEN: 14.944µs, IS NULL/OR: 16.131µs
Query 63 - BETWEEN: 14.735µs, IS NULL/OR: 16.196µs
Query 64 - BETWEEN: 15.084µs, IS NULL/OR: 17.143µs
Query 65 - BETWEEN: 15.457µs, IS NULL/OR: 16.688µs
<span class="nb">.</span>
<span class="nb">.</span>
Query 80 - BETWEEN: 25.236µs, IS NULL/OR: 22.812µs
Query 81 - BETWEEN: 24.781µs, IS NULL/OR: 22.533µs
Query 82 - BETWEEN: 24.459µs, IS NULL/OR: 22.659µs
Query 83 - BETWEEN: 24.48µs, IS NULL/OR: 24.181µs
Query 84 - BETWEEN: 24.922µs, IS NULL/OR: 23.309µs
Query 85 - BETWEEN: 24.829µs, IS NULL/OR: 22.028µs
Query 86 - BETWEEN: 24.633µs, IS NULL/OR: 22.383µs

-&gt; BETWEEN Query - Avg: 20.556µs, Max: 130.997µs, Min: 14.37µs
-&gt; IS NULL/OR Query - Avg: 19.853µs, Max: 34.539µs, Min: 13.835µs

</code></pre></div></div>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#  index effective_at, expire_at</span>
Query 1 - BETWEEN: 64.32µs, IS NULL/OR: 26.332µs
Query 2 - BETWEEN: 31.684µs, IS NULL/OR: 21.047µs
Query 3 - BETWEEN: 27.349µs, IS NULL/OR: 18.24µs
<span class="nb">.</span>
Query 90 - BETWEEN: 14.501µs, IS NULL/OR: 13.311µs
Query 91 - BETWEEN: 14.412µs, IS NULL/OR: 14.461µs
Query 92 - BETWEEN: 14.897µs, IS NULL/OR: 14.527µs
Query 93 - BETWEEN: 14.834µs, IS NULL/OR: 13.487µs
Query 94 - BETWEEN: 14.44µs, IS NULL/OR: 13.501µs
Query 95 - BETWEEN: 14.643µs, IS NULL/OR: 13.488µs
Query 96 - BETWEEN: 14.544µs, IS NULL/OR: 13.745µs
Query 97 - BETWEEN: 14.559µs, IS NULL/OR: 13.499µs
Query 98 - BETWEEN: 14.548µs, IS NULL/OR: 13.602µs
Query 99 - BETWEEN: 14.576µs, IS NULL/OR: 13.42µs
Query 100 - BETWEEN: 14.421µs, IS NULL/OR: 14.638µs

-&gt; BETWEEN Query - Avg: 22.53µs, Max: 64.32µs, Min: 14.355µs
-&gt; IS NULL/OR Query - Avg: 17.132µs, Max: 26.332µs, Min: 13.311µs
</code></pre></div></div>

<blockquote>
  <p>script ถูกแชร์ไว้ที่ <a href="https://github.com/wittawasw/wittawasw.github.io/blob/main/code/go/sqlperf/main.go">github</a></p>
</blockquote>]]></content><author><name>wittawasw</name><email>your-email@domain.com</email></author><category term="sql" /><summary type="html"><![CDATA[วันก่อนเห็นน้องในทีมส่งข้อความหากันเองในกลุ่มที่ทำงานเป็น query ด้วย Gorm หน้าตาประมาณ]]></summary></entry><entry><title type="html">Ruby 3.3.5 เตือนให้เอา standard lib ออก</title><link href="https://wittawasw.com/2024/09/04/ruby-3-5-deprecation-warnings.html" rel="alternate" type="text/html" title="Ruby 3.3.5 เตือนให้เอา standard lib ออก" /><published>2024-09-04T21:34:00+07:00</published><updated>2024-09-04T21:34:00+07:00</updated><id>https://wittawasw.com/2024/09/04/ruby-3-5-deprecation-warnings</id><content type="html" xml:base="https://wittawasw.com/2024/09/04/ruby-3-5-deprecation-warnings.html"><![CDATA[<p>ไม่รู้ว่าเตือนตั้งแต่ 3.3.อะไร เพราะจาก 3.3.0 ก็มา 3.3.5 เลย เจอตอนกำลังจะเขียน
blog ก็เลยได้อีก blog ว่าตอนนี้ Ruby core กำลังเดินตาม Roadmap ที่อยากให้
Runtime โดย default มี memory footprint ที่เล็กลง โดยเท่าที่รู้ก็ถอดออกไปตามนี้</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Ruby 3.5 deprecation warnings</span>
<span class="n">gem</span> <span class="s2">"logger"</span>
<span class="n">gem</span> <span class="s2">"base64"</span>
<span class="n">gem</span> <span class="s2">"csv"</span>
<span class="n">gem</span> <span class="s2">"ostruct"</span>
</code></pre></div></div>

<p>ก็ไม่ใช่เรื่องแย่ แต่ก็น่าเสียดายที่คำสั่งใน <code class="language-plaintext highlighter-rouge">base64</code> เป็น 1 ใน คำสั่งแสนสะดวก
ที่ผมเอาไว้ใช้ได้ตลอดต้องมาโดนถอดออก แต่ <code class="language-plaintext highlighter-rouge">ostruct</code> ไม่น่าเสียดายเลยเพราะเอาจริงๆ
มันถูกมองว่าไม่ควรใช้มานานแล้ว</p>]]></content><author><name>wittawasw</name><email>your-email@domain.com</email></author><category term="ruby" /><category term="deprecation" /><summary type="html"><![CDATA[ไม่รู้ว่าเตือนตั้งแต่ 3.3.อะไร เพราะจาก 3.3.0 ก็มา 3.3.5 เลย เจอตอนกำลังจะเขียน blog ก็เลยได้อีก blog ว่าตอนนี้ Ruby core กำลังเดินตาม Roadmap ที่อยากให้ Runtime โดย default มี memory footprint ที่เล็กลง]]></summary></entry></feed>