<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.3">Jekyll</generator><link href="https://wittawasw.com/feed.xml" rel="self" type="application/atom+xml" /><link href="https://wittawasw.com/" rel="alternate" type="text/html" /><updated>2024-04-18T09:36:03+07:00</updated><id>https://wittawasw.com/feed.xml</id><title type="html">wittawasw</title><subtitle></subtitle><author><name>wittawasw</name><email>your-email@domain.com</email></author><entry><title type="html">วิธีใช้ ovpn profile ที่มี pin code ของ Pritunl ด้วย openvpn ผ่าน command-line</title><link href="https://wittawasw.com/2024/04/17/how-to-use-pritunl-ovpn-in-cli.html" rel="alternate" type="text/html" title="วิธีใช้ ovpn profile ที่มี pin code ของ Pritunl ด้วย openvpn ผ่าน command-line" /><published>2024-04-17T16:47:00+07:00</published><updated>2024-04-17T16:47:00+07:00</updated><id>https://wittawasw.com/2024/04/17/how-to-use-pritunl-ovpn-in-cli</id><content type="html" xml:base="https://wittawasw.com/2024/04/17/how-to-use-pritunl-ovpn-in-cli.html"><![CDATA[<p>นั่งหาวิธีการใช้ VPN profile ของ Pritunl ด้วย CLI เพราะเบื่อการที่ Pritunl Client มักจะหลุดและต้องมาคอยใส่ pin ใหม่อยู่เรื่อยๆ</p>

<h3 id="คำสั่งในการรัน-vpn">คำสั่งในการรัน VPN</h3>

<p>ใช้ client ของ openvpn โดยถ้าใน MacOS สามารถ install ผ่าน <a href="https://formulae.brew.sh/formula/openvpn">Homebrew</a> ได้</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># เมื่อ profile ที่ใช้อยู่ใน file ชื่อ profile.vpn</span>
<span class="c"># และ username, pin code อยู่ใน pass.txt</span>
<span class="c"># --daemon คือ การสั่งให้ daemonize process</span>
<span class="nb">sudo </span>openvpn <span class="nt">--config</span> profile.ovpn <span class="nt">--auth-user-pass</span> <span class="s2">"pass.txt"</span> <span class="nt">--daemon</span>
</code></pre></div></div>

<h3 id="ตัวอย่างไฟล์-passtxt">ตัวอย่างไฟล์ <code class="language-plaintext highlighter-rouge">pass.txt</code></h3>

<ul>
  <li>เมื่อ username = username@example.com</li>
  <li>และ pin code = 123456</li>
</ul>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>username@example.com
123456
</code></pre></div></div>]]></content><author><name>wittawasw</name><email>your-email@domain.com</email></author><category term="pritunl," /><category term="vpn," /><category term="openvpn," /><category term="cli" /><summary type="html"><![CDATA[นั่งหาวิธีการใช้ VPN profile ของ Pritunl ด้วย CLI เพราะเบื่อการที่ Pritunl Client มักจะหลุดและต้องมาคอยใส่ pin ใหม่อยู่เรื่อยๆ]]></summary></entry><entry><title type="html">การเขียน Test ไม่ได้หมายความว่าเราต้องใช้ Test Runner เสมอไป</title><link href="https://wittawasw.com/2024/04/09/unit-testings-without-test-runner.html" rel="alternate" type="text/html" title="การเขียน Test ไม่ได้หมายความว่าเราต้องใช้ Test Runner เสมอไป" /><published>2024-04-09T13:16:00+07:00</published><updated>2024-04-09T13:16:00+07:00</updated><id>https://wittawasw.com/2024/04/09/unit-testings-without-test-runner</id><content type="html" xml:base="https://wittawasw.com/2024/04/09/unit-testings-without-test-runner.html"><![CDATA[<p>อาทิตย์ก่อนมีโอกาสได้ร่วม training ในหัวข้อ TDD แล้วก็รู้สึกว่าหลายคนมี mindset ประมาณว่า</p>

<blockquote>
  <p>ไม่ต้องเขียน test ถ้ายังไม่มี Test Runner</p>
</blockquote>

<p>ซึ่งผมมองว่า <u>ผิด</u> โดยความเห็นของผมคือ ต่อให้ใน project ไม่มี test runner
อยู่ เราก็ควรเขียน Unit Test เป็นอย่างน้อยอยู่ดี</p>

<p>หลังจากที่ได้ไป pair กับคนที่ทำ Javascript, Python ที่ไม่เคย setup Test Runner
มาก่อนก็เลยได้ลองเขียน <code class="language-plaintext highlighter-rouge">assertion</code> แบบง่ายๆ ให้ดูว่าสุดท้ายแล้วการเขียน test ก็แค่
การเขียนฟังก์ชันให้เรียกใช้ฟังก์ชันที่เราต้องการทดสอบและเปรียบเทียบผลลัพธ์เท่านั้นเอง</p>

<p>Code ส่วนของ Javascript ทำที่เครื่องคนอื่นก็เลยไม่ได้เก็บไว้ มีแต่ Python
ที่ทำในเครื่องตัวเองก็เลยยังอยู่ แต่จริงๆแล้วเลือกใช้ ภาษา Dart ตอน training
เพราะเป็นภาษาที่ใช้ในงานปัจจุบัน แต่ยังไม่คล่อง ก็เลยถือโอกาสลองฝึกไปด้วย</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>

<span class="n">months</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">"3"</span><span class="p">:</span> <span class="p">[</span><span class="mi">31</span><span class="p">,</span> <span class="mi">31</span><span class="p">],</span>
  <span class="s">"4"</span><span class="p">:</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">3000</span><span class="p">],</span>
  <span class="s">"5"</span><span class="p">:</span> <span class="p">[</span><span class="mi">31</span><span class="p">,</span> <span class="mi">3100</span><span class="p">],</span>
  <span class="s">"6"</span><span class="p">:</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">3000</span><span class="p">],</span>
  <span class="s">"7"</span><span class="p">:</span> <span class="p">[</span><span class="mi">31</span><span class="p">,</span> <span class="mi">31</span><span class="p">],</span>
<span class="p">}</span>

<span class="n">months_arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">31</span><span class="p">,</span> <span class="mi">3000</span><span class="p">,</span> <span class="mi">3100</span><span class="p">,</span> <span class="mi">3000</span><span class="p">,</span> <span class="mi">31</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">getBudgets</span><span class="p">(</span><span class="n">from_date</span><span class="p">,</span> <span class="n">to_date</span><span class="p">):</span>
  <span class="n">from_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">from_date</span><span class="p">,</span> <span class="s">"%Y-%m-%d"</span><span class="p">)</span>
  <span class="n">to_date</span>   <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">to_date</span><span class="p">,</span> <span class="s">"%Y-%m-%d"</span><span class="p">)</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">to_date</span> <span class="o">-</span> <span class="n">from_date</span><span class="p">).</span><span class="n">days</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="k">return</span> <span class="s">"Error"</span>

  <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="n">current_date</span> <span class="o">=</span> <span class="n">from_date</span>

  <span class="k">while</span> <span class="n">current_date</span> <span class="o">&lt;=</span> <span class="n">to_date</span><span class="p">:</span>
    <span class="n">values</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">months</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">current_date</span><span class="p">.</span><span class="n">month</span><span class="p">)][</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="n">months</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">current_date</span><span class="p">.</span><span class="n">month</span><span class="p">)][</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">current_date</span> <span class="o">+=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

  <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">testGetBudgets</span><span class="p">(</span><span class="n">from_date</span><span class="p">,</span> <span class="n">to_date</span><span class="p">,</span> <span class="n">expect</span><span class="p">):</span>
  <span class="n">test_case</span> <span class="o">=</span> <span class="s">"Test: "</span> <span class="o">+</span> <span class="n">from_date</span> <span class="o">+</span> <span class="s">" : "</span> <span class="o">+</span> <span class="n">to_date</span> <span class="o">+</span> <span class="s">" = "</span>

  <span class="n">actual</span> <span class="o">=</span> <span class="n">getBudgets</span><span class="p">(</span><span class="n">from_date</span><span class="p">,</span> <span class="n">to_date</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">actual</span> <span class="o">==</span> <span class="n">expect</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">test_case</span> <span class="o">+</span> <span class="s">"Passed"</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">test_case</span> <span class="o">+</span> <span class="s">"Failed"</span> <span class="o">+</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span> <span class="o">+</span> <span class="sa">f</span><span class="s">"Expected: </span><span class="si">{</span><span class="n">expect</span><span class="si">}</span><span class="s">, got </span><span class="si">{</span><span class="n">actual</span><span class="si">}</span><span class="s">"</span>


<span class="k">print</span><span class="p">(</span><span class="n">testGetBudgets</span><span class="p">(</span><span class="s">"2024-07-02"</span><span class="p">,</span> <span class="s">"2024-07-04"</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">testGetBudgets</span><span class="p">(</span><span class="s">"2024-07-04"</span><span class="p">,</span> <span class="s">"2024-07-02"</span><span class="p">,</span> <span class="s">"Error"</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">testGetBudgets</span><span class="p">(</span><span class="s">"2024-06-20"</span><span class="p">,</span> <span class="s">"2024-07-04"</span><span class="p">,</span> <span class="mi">1100</span> <span class="o">+</span> <span class="mi">4</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">testGetBudgets</span><span class="p">(</span><span class="s">"2024-03-10"</span><span class="p">,</span> <span class="s">"2024-07-02"</span><span class="p">,</span> <span class="mi">22</span> <span class="o">+</span> <span class="mi">9100</span> <span class="o">+</span> <span class="mi">2</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">testGetBudgets</span><span class="p">(</span><span class="s">"2024-06-18"</span><span class="p">,</span> <span class="s">"2024-07-04"</span><span class="p">,</span> <span class="mi">1300</span> <span class="o">+</span> <span class="mi">4</span><span class="p">))</span>
</code></pre></div></div>]]></content><author><name>wittawasw</name><email>your-email@domain.com</email></author><category term="tdd," /><category term="testing," /><category term="python" /><summary type="html"><![CDATA[อาทิตย์ก่อนมีโอกาสได้ร่วม training ในหัวข้อ TDD แล้วก็รู้สึกว่าหลายคนมี mindset ประมาณว่า]]></summary></entry><entry><title type="html">จัดรูปแบบของ paragraph ให้เหมือนหนังสือด้วย text-justify</title><link href="https://wittawasw.com/2024/03/29/text-indent-and-text-justify.html" rel="alternate" type="text/html" title="จัดรูปแบบของ paragraph ให้เหมือนหนังสือด้วย text-justify" /><published>2024-03-29T19:55:00+07:00</published><updated>2024-03-29T19:55:00+07:00</updated><id>https://wittawasw.com/2024/03/29/text-indent-and-text-justify</id><content type="html" xml:base="https://wittawasw.com/2024/03/29/text-indent-and-text-justify.html"><![CDATA[<p>เร็วๆนี้มีเหตุให้ต้องทำการ render HTML เพื่อแปลงเป็น PDF สำหรับใช้เป็นเอกสารทางการ
ก็เลยได้วิธีจัดย่อหน้ามาใช้ด้วย ถ้าต้องทำรูปแบบเหมือนจดหมายทางการ</p>

<blockquote>
  <p>วิธีการก็คือใช้ CSS แบบนี้</p>
</blockquote>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">p</span><span class="nc">.indented-full</span> <span class="p">{</span>
  <span class="c">/* เว้นช่องว่างในบรรทัดแรกของ paragraph */</span>
  <span class="nl">text-indent</span><span class="p">:</span> <span class="m">30px</span><span class="p">;</span>
  <span class="c">/* ขยายช่องว่างระหว่างคำให้เต็มบรรทัด */</span>
  <span class="nl">text-align</span><span class="p">:</span> <span class="nb">justify</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ลองเอามาใส่ใน blog นี้ด้วยเลย แต่รู้สึกไม่ชอบการ indent บรรทัดแรกบนหน้าเว็บ ก็เลยใส่แค่
<code class="language-plaintext highlighter-rouge">text-aligm: justtify;</code> ก็พอ</p>]]></content><author><name>wittawasw</name><email>your-email@domain.com</email></author><category term="css," /><category term="html" /><summary type="html"><![CDATA[เร็วๆนี้มีเหตุให้ต้องทำการ render HTML เพื่อแปลงเป็น PDF สำหรับใช้เป็นเอกสารทางการ ก็เลยได้วิธีจัดย่อหน้ามาใช้ด้วย ถ้าต้องทำรูปแบบเหมือนจดหมายทางการ]]></summary></entry><entry><title type="html">อนาคตของนักพัฒนาซอฟต์แวร์ในยุคถัดไปที่ AI รุ่งเรือง</title><link href="https://wittawasw.com/2024/03/28/the-future-of-software-developer-jobs.html" rel="alternate" type="text/html" title="อนาคตของนักพัฒนาซอฟต์แวร์ในยุคถัดไปที่ AI รุ่งเรือง" /><published>2024-03-28T22:42:00+07:00</published><updated>2024-03-28T22:42:00+07:00</updated><id>https://wittawasw.com/2024/03/28/the-future-of-software-developer-jobs</id><content type="html" xml:base="https://wittawasw.com/2024/03/28/the-future-of-software-developer-jobs.html"><![CDATA[<p>ได้มีโอกาสเห็นการกลับมา trending ของหัวข้อที่ว่า AI อย่าง devin จะทำให้นักพัฒนาซอฟต์แวร์สูญพันธ์ได้ แต่ถ้าถามผม ผมก็คงตอบว่า ผมไม่ได้กังวลเท่าไหร่ เพราะในทรรศนะส่วนตัวแล้ว เชื่อว่าตัวเองน่าจะรอดหรืออย่างน้อยก็ไม่ใช่กลุ่มแรกๆที่โดนแทนที่ได้</p>

<blockquote>
  <p>ในอีก 20 ปี นักพัฒนาซอฟต์แวร์จะเป็นอาชีพที่หายไปหรือไม่ ?</p>
</blockquote>

<p>เชื่อว่า “ไม่” แต่ไม่หายไปในที่นี้ เพียงแค่ไม่เหลือ 0 เท่านั้น เชื่อว่าเราจะยังต้องการผู้เชี่ยวชาญจำนวนหนึ่งในการทำงานร่วมกับ AI เปรียบเทียบได้กับการปฏิวัติเกษตรกรรมกับอุตสาหกรรมที่ผ่านมา ก็ไม่ได้ทำให้อาชีพทั้งสองหายไปจนเป็น 0 แต่ก็ทำให้จำนวนตำแหน่งงานเหลือน้อยลงมาก</p>

<blockquote>
  <p>คิดว่าควรจะเรียน หรือศึกษาด้านไหนเพื่อไม่ให้ถูกแทนที่ได้ ?</p>
</blockquote>

<p>เชื่อว่าไม่มีอาชีพไหนรอดเลย แม้แต่อาชีพเดียว ยกตัวอย่างจากที่ผู้ก่อตั้ง Nvidia ให้สัมภาษณ์ว่าควรเรียนด้านเคมี กับชีววิทยามากกว่า ก็ค่อนข้างย้อนแย้งในความก้าวหน้าของ AI ที่สามารถทำงานปัจจุบันของกลุ่มอาชีพด้านการวิทยาศาสตร์ได้ดีมากแล้ว การวิเคราะห์ข้อมูลจากผลการทดลองก็ใช้ AI วิเคราะห์ได้ หรือการเก็บข้อมูลทางวิทยาศาสตร์ต่างๆก็ใช้หุ่นยนต์แทนที่ได้เหมือนกัน</p>]]></content><author><name>wittawasw</name><email>your-email@domain.com</email></author><category term="thought," /><category term="devin" /><summary type="html"><![CDATA[ได้มีโอกาสเห็นการกลับมา trending ของหัวข้อที่ว่า AI อย่าง devin จะทำให้นักพัฒนาซอฟต์แวร์สูญพันธ์ได้ แต่ถ้าถามผม ผมก็คงตอบว่า ผมไม่ได้กังวลเท่าไหร่ เพราะในทรรศนะส่วนตัวแล้ว เชื่อว่าตัวเองน่าจะรอดหรืออย่างน้อยก็ไม่ใช่กลุ่มแรกๆที่โดนแทนที่ได้]]></summary></entry><entry><title type="html">เพิ่ม SSH key ให้ ssh-agent ใน MacOS</title><link href="https://wittawasw.com/2024/02/27/add-ssh-key-to-ssh-agent-in-macos.html" rel="alternate" type="text/html" title="เพิ่ม SSH key ให้ ssh-agent ใน MacOS" /><published>2024-02-27T09:59:00+07:00</published><updated>2024-02-27T09:59:00+07:00</updated><id>https://wittawasw.com/2024/02/27/add-ssh-key-to-ssh-agent-in-macos</id><content type="html" xml:base="https://wittawasw.com/2024/02/27/add-ssh-key-to-ssh-agent-in-macos.html"><![CDATA[<p>เพิ่งค้นพบว่า MacOS หลังกลับมาใช้ไม่นาน ว่าไม่เรียกใช้ SSH key ในชื่ออื่นที่ไม่ใช้การใช้ <code class="language-plaintext highlighter-rouge">id_</code> นำหน้าแล้วตามด้วย algorithm ที่ใช้เข้ารหัส เช่น <code class="language-plaintext highlighter-rouge">id_rsa</code>, <code class="language-plaintext highlighter-rouge">id_ed25519</code> ตั้งแต่ต้น</p>

<p>แต่เนื่องจากติดนิสัยในการสร้าง key ตามงานที่ใช้มาตลอดตั้งแต่ที่ใช้ Ubuntu ว่าจะไม่ใช้ key ซ้ำกันในแต่ล่ะงาน ก็เลยมีปัญหาเล็กน้อยก่อนเริ่มงานล่าสุด เช่น ถ้าชื่องาน <code class="language-plaintext highlighter-rouge">wittawasw</code> ก็จะตั้งชื่อ key เป็น <code class="language-plaintext highlighter-rouge">wittawasw_rsa</code> หรือ <code class="language-plaintext highlighter-rouge">wittawasw_ed25519</code></p>

<h3 id="ทางแก้-ใช้คำสั่งเพิ่ม-ssh-key-ให้-ssh-agent-โดยตรง">ทางแก้: ใช้คำสั่งเพิ่ม SSH key ให้ ssh-agent โดยตรง</h3>

<p>นอกจากขั้นตอนปกติที่เราแก้ใน file <code class="language-plaintext highlighter-rouge">~/.ssh/config</code> แล้ว การเพิ่ม SSH key ที่สร้างใหม่ให้สามารถใช้งานได้ ใน MacOS ต้องทำการเพิ่มเข้า Apple Keychain ด้วยคำสั่ง</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh-add <span class="nt">--apple-use-keychain</span> ~/.ssh/wittawasw_rsa
</code></pre></div></div>]]></content><author><name>wittawasw</name><email>your-email@domain.com</email></author><category term="macos," /><category term="ssh" /><summary type="html"><![CDATA[เพิ่งค้นพบว่า MacOS หลังกลับมาใช้ไม่นาน ว่าไม่เรียกใช้ SSH key ในชื่ออื่นที่ไม่ใช้การใช้ id_ นำหน้าแล้วตามด้วย algorithm ที่ใช้เข้ารหัส เช่น id_rsa, id_ed25519 ตั้งแต่ต้น]]></summary></entry><entry><title type="html">ติดตั้ง GVM กับ Go 1.22 บน MacOS ตั้งแต่ต้น</title><link href="https://wittawasw.com/2024/02/14/install-go1-22-in-macos.html" rel="alternate" type="text/html" title="ติดตั้ง GVM กับ Go 1.22 บน MacOS ตั้งแต่ต้น" /><published>2024-02-14T10:51:00+07:00</published><updated>2024-02-14T10:51:00+07:00</updated><id>https://wittawasw.com/2024/02/14/install-go1-22-in-macos</id><content type="html" xml:base="https://wittawasw.com/2024/02/14/install-go1-22-in-macos.html"><![CDATA[<blockquote>
  <p>บทความนี้จะทำการติดตั้ง Go เวอร์ชั่น 1.22 โดยผ่าน <a href="https://github.com/moovweb/gvm">GVM</a> เพื่อเผื่อทางเลือกสำหรับการติดตั้งเวอร์ชั่นอื่นด้วย</p>
</blockquote>

<p>อ้างอิง:</p>
<ul>
  <li><a href="https://github.com/moovweb/gvm">https://github.com/moovweb/gvm</a></li>
  <li><a href="https://formulae.brew.sh/">homebrew</a></li>
  <li><a href="https://go.dev/">Go</a></li>
</ul>

<h2 id="ติดตั้ง-gvm">ติดตั้ง gvm</h2>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ความต้องการของ script ติดตั้ง</span>
xcode-select <span class="nt">--install</span>
brew update
brew <span class="nb">install </span>mercurial

<span class="c"># ติดตั้ง gvm</span>
bash &lt; &lt;<span class="o">(</span>curl <span class="nt">-s</span> <span class="nt">-S</span> <span class="nt">-L</span> https://raw.githubusercontent.com/moovweb/gvm/master/binscripts/gvm-installer<span class="o">)</span>
</code></pre></div></div>

<h2 id="ติดตั้ง-go">ติดตั้ง Go</h2>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># เนื่องจาก Go 1.5+ ต้องใช้ Go ในการ compile จึงเลือกใช้การติดตั้งผ่าน Homebrew ก่อน เพื่อความสะดวก</span>
brew <span class="nb">install </span>go

<span class="c"># ติดตั้ง Go 1.22</span>
gvm <span class="nb">install </span>go1.22

<span class="c"># ตั้งค่าให้ใช้ Go 1.22 เป็นค่าเริ่มต้น</span>
gvm use go1.22 <span class="nt">--default</span>
</code></pre></div></div>

<h2 id="ตรวจสอบ-go-ที่ติดตั้ง">ตรวจสอบ Go ที่ติดตั้ง</h2>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>go version
<span class="c"># =&gt; go version go1.22.0 darwin/arm64</span>
</code></pre></div></div>]]></content><author><name>wittawasw</name><email>your-email@domain.com</email></author><category term="gvm," /><category term="golang," /><category term="install," /><category term="macos" /><summary type="html"><![CDATA[บทความนี้จะทำการติดตั้ง Go เวอร์ชั่น 1.22 โดยผ่าน GVM เพื่อเผื่อทางเลือกสำหรับการติดตั้งเวอร์ชั่นอื่นด้วย]]></summary></entry><entry><title type="html">Convert PDF เป็นสีขาวดำบน Ubuntu ด้วย imagemagick</title><link href="https://wittawasw.com/2024/01/22/convert-pdf-grayscale-ubuntu.html" rel="alternate" type="text/html" title="Convert PDF เป็นสีขาวดำบน Ubuntu ด้วย imagemagick" /><published>2024-01-22T07:48:00+07:00</published><updated>2024-01-22T07:48:00+07:00</updated><id>https://wittawasw.com/2024/01/22/convert-pdf-grayscale-ubuntu</id><content type="html" xml:base="https://wittawasw.com/2024/01/22/convert-pdf-grayscale-ubuntu.html"><![CDATA[<p>ใช้คำสั่ง</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>convert <span class="nt">-monochrome</span> <span class="nt">-density</span> 600 input.pdf output.pdf
</code></pre></div></div>

<p>ถ้าติดปัญหา <code class="language-plaintext highlighter-rouge">not authorize .....</code>  หรือ <code class="language-plaintext highlighter-rouge">not allowed by security policy</code> ให้เข้าไปแก้
security policy ของ PDF ก่อน</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># หา path ของไฟล์ policy ด้วยคำสั่ง -list policy</span>
identify <span class="nt">-list</span> policy | less

<span class="c"># Output:</span>
<span class="c"># Path: /etc/ImageMagick-6/policy.xml</span>
<span class="c">#   Policy: Resource</span>
<span class="c">#     name: disk</span>
<span class="c">#     value: 1GiB</span>
<span class="c">#   Policy: Resource</span>
<span class="c">#     name: map</span>
<span class="c">#     value: 512MiB</span>
<span class="c">#   Policy: Resource</span>
<span class="c">#     name: memory</span>
<span class="c">#     value: 256MiB</span>
<span class="c">#   Policy: Resource</span>
<span class="c">#   ...</span>
</code></pre></div></div>

<p>เข้าไป comment หรือลบบรรทัดที่เป็น policy ของ PDF ออก</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- &lt;policy domain="coder" rights="none" pattern="PDF" /&gt; --&gt;</span>
</code></pre></div></div>]]></content><author><name>wittawasw</name><email>your-email@domain.com</email></author><category term="pdf," /><category term="converter," /><category term="imagemagick" /><summary type="html"><![CDATA[ใช้คำสั่ง]]></summary></entry><entry><title type="html">ลองใช้ Hotwired: Turbo Drive ในเว็บที่ไม่ใช่ Rails</title><link href="https://wittawasw.com/2024/01/08/%E0%B8%A5%E0%B8%AD%E0%B8%87%E0%B9%83%E0%B8%8A%E0%B9%89-hotwired-turbo-%E0%B9%83%E0%B8%99%E0%B9%80%E0%B8%A7%E0%B9%87%E0%B8%9A%E0%B8%97%E0%B8%B5%E0%B9%88%E0%B9%84%E0%B8%A1%E0%B9%88%E0%B9%83%E0%B8%8A%E0%B9%88-rails.html" rel="alternate" type="text/html" title="ลองใช้ Hotwired: Turbo Drive ในเว็บที่ไม่ใช่ Rails" /><published>2024-01-08T12:13:00+07:00</published><updated>2024-01-08T12:13:00+07:00</updated><id>https://wittawasw.com/2024/01/08/%E0%B8%A5%E0%B8%AD%E0%B8%87%E0%B9%83%E0%B8%8A%E0%B9%89-hotwired-turbo-%E0%B9%83%E0%B8%99%E0%B9%80%E0%B8%A7%E0%B9%87%E0%B8%9A%E0%B8%97%E0%B8%B5%E0%B9%88%E0%B9%84%E0%B8%A1%E0%B9%88%E0%B9%83%E0%B8%8A%E0%B9%88-rails</id><content type="html" xml:base="https://wittawasw.com/2024/01/08/%E0%B8%A5%E0%B8%AD%E0%B8%87%E0%B9%83%E0%B8%8A%E0%B9%89-hotwired-turbo-%E0%B9%83%E0%B8%99%E0%B9%80%E0%B8%A7%E0%B9%87%E0%B8%9A%E0%B8%97%E0%B8%B5%E0%B9%88%E0%B9%84%E0%B8%A1%E0%B9%88%E0%B9%83%E0%B8%8A%E0%B9%88-rails.html"><![CDATA[<p><img src="/images/post/hotwired.png" alt="hotwired" />
<br />
<br />
<a href="https://hotwired.dev/">Hotwired</a> คือชุด Javascript library ที่เป็นค่าเริ่มต้นของ
Ruby on Rails ตั้งแต่เวอร์ชั่นที่ 7 เป็นต้นมา แต่การที่ library ถูกเขียนด้วย Javascript ทั้งหมด
การใช้งานจึงไม่ได้ถูกผูกอยู่กับ Ruby on Rails เท่านั้น โดย
<a href="https://turbo.hotwired.dev/handbook/drive">Turbo Drive</a> เป็น feature แรกของ
Hotwired ที่เริ่มใช้งานได้ง่ายที่สุด แต่ก็สามารถเห็นผลลัพธ์ได้ทันทีและมีผลกระทบน้อย
หากเป็นเว็บไซต์ที่มีลักษณะการใช้งานเพียงเพื่อการแสดง content เท่านั้น เช่น เว็บไซต์สำนักข่าว หรือ บล็อกส่วนตัว</p>

<h2 id="การติดตั้งในหน้าเว็บเพื่อเริ่มใช้งาน">การติดตั้งในหน้าเว็บเพื่อเริ่มใช้งาน</h2>

<ul>
  <li>วาง script tag นี้ที่หน้า HTML layout ของทุกหน้า
    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"module"</span><span class="nt">&gt;</span>
  <span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">Turbo</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">https://cdn.skypack.dev/@hotwired/turbo@7.3.0</span><span class="dl">'</span><span class="p">;</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div>    </div>
  </li>
  <li>ตัวอย่าง
    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>...<span class="nt">&lt;/title&gt;</span>
    .
    .
    .
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"module"</span><span class="nt">&gt;</span>
      <span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">Turbo</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">https://cdn.skypack.dev/@hotwired/turbo@7.3.0</span><span class="dl">'</span><span class="p">;</span>
    <span class="nt">&lt;/script&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    .
    .
    .
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div>    </div>
  </li>
  <li>เท่านี้ก็สามารถเริ่มใช้งาน Turbo Drive ได้เลย</li>
</ul>

<blockquote>
  <p>ตั้งค่าเวอร์ชั่นของ turbo ที่ 7.3.0 ซึ่งเป็นรุ่น stable</p>
</blockquote>

<h2 id="วิธีใช้งาน">วิธีใช้งาน</h2>
<ul>
  <li>ไม่ต้องเพิ่มคำสั่งอะไรใน source code เพราะการ import turbo ด้วย script tag ก็ทำให้ Turbo Drive เริ่มทำงานแล้ว</li>
</ul>

<blockquote>
  <p>แล้วต่างจากเดิมยังไง ในเมื่อยังไม่ได้ทำอะไรเพิ่ม ?</p>
</blockquote>

<h2 id="สิ่งที่เปลี่ยนไปหลังจากเพิ่ม-script">สิ่งที่เปลี่ยนไปหลังจากเพิ่ม script</h2>
<ul>
  <li>การ navigation ผ่าน tag <code class="language-plaintext highlighter-rouge">&lt;a&gt;</code> และ <code class="language-plaintext highlighter-rouge">&lt;form&gt;</code> ทุกอันจะถูกแทนที่ด้วย Turbo Drive</li>
  <li>การ navigate ด้วย Turbo Drive จะทำงานคล้ายกับ SPA (Single Page Application)
แต่แตกต่างตรงที่เราไม่ต้องเขียน logic เอง และ Turbo Drive จะทำการ replace HTML ภายใน
<code class="language-plaintext highlighter-rouge">&lt;body&gt;</code> ให้โดยอัตโนมัติ โดยไม่มีการ refresh page</li>
  <li>หากทำการ inspect ที่ network tab จะเห็นความแตกต่าง ตามตัวอย่างข้างล่าง</li>
</ul>

<div style="display: flex; justify-content: space-between;margin-bottom:50px;">
  <div>
    <video width="98%" preload="auto" muted="" controls="">
      <source src="/videos/normal-navigation.mp4" type="video/mp4" />
      Your browser does not support the video tag.
    </video>
    <quote>
      navigation แบบปกติก่อนใส่ script
    </quote>
  </div>
  <div>
    <video width="98%" preload="auto" muted="" controls="">
      <source src="/videos/navigation-with-turbodrive.mp4" type="video/mp4" />
      Your browser does not support the video tag.
    </video>
    <quote>
      navigation ด้วย Turbo Drive หลังใส่ script
    </quote>
  </div>
</div>

<blockquote>
  <p>สามารถทำการ inspect network และ script tag ของเว็บนี้เพื่อดูเป็นตัวอย่างได้</p>
</blockquote>

<h2 id="เปลี่ยนสีของ-progress-bar">เปลี่ยนสีของ Progress Bar</h2>
<ul>
  <li>Turbo Drive มีแถบ Progress Bar ให้เป็นค่าตั้งต้น โดยเราสารถกำหนดสีได้เองผ่าน CSS
    <div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">//</span> <span class="nt">ตัวอย่างที่ใช้งานจริงบนเว็บไซต์นี้</span>
<span class="nc">.turbo-progress-bar</span> <span class="p">{</span>
<span class="nl">background</span><span class="p">:</span> <span class="m">#79b8ff</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </li>
</ul>]]></content><author><name>wittawasw</name><email>your-email@domain.com</email></author><category term="rails," /><category term="turbo," /><category term="hotwired," /><category term="html," /><category term="javascript" /><summary type="html"><![CDATA[Hotwired คือชุด Javascript library ที่เป็นค่าเริ่มต้นของ Ruby on Rails ตั้งแต่เวอร์ชั่นที่ 7 เป็นต้นมา แต่การที่ library ถูกเขียนด้วย Javascript ทั้งหมด การใช้งานจึงไม่ได้ถูกผูกอยู่กับ Ruby on Rails เท่านั้น โดย Turbo Drive เป็น feature แรกของ Hotwired ที่เริ่มใช้งานได้ง่ายที่สุด แต่ก็สามารถเห็นผลลัพธ์ได้ทันทีและมีผลกระทบน้อย หากเป็นเว็บไซต์ที่มีลักษณะการใช้งานเพียงเพื่อการแสดง content เท่านั้น เช่น เว็บไซต์สำนักข่าว หรือ บล็อกส่วนตัว]]></summary></entry><entry><title type="html">ต้นทุนของพัฒนาผลิตภัณฑ์แบบ ChatGPT</title><link href="https://wittawasw.com/2023/02/22/%E0%B8%95%E0%B9%89%E0%B8%99%E0%B8%97%E0%B8%B8%E0%B8%99%E0%B8%82%E0%B8%AD%E0%B8%87%E0%B8%9E%E0%B8%B1%E0%B8%92%E0%B8%99%E0%B8%B2%E0%B8%9C%E0%B8%A5%E0%B8%B4%E0%B8%95%E0%B8%A0%E0%B8%B1%E0%B8%93%E0%B8%91%E0%B9%8C%E0%B9%81%E0%B8%9A%E0%B8%9A-ChatGPT.html" rel="alternate" type="text/html" title="ต้นทุนของพัฒนาผลิตภัณฑ์แบบ ChatGPT" /><published>2023-02-22T20:25:00+07:00</published><updated>2023-02-22T20:25:00+07:00</updated><id>https://wittawasw.com/2023/02/22/%E0%B8%95%E0%B9%89%E0%B8%99%E0%B8%97%E0%B8%B8%E0%B8%99%E0%B8%82%E0%B8%AD%E0%B8%87%E0%B8%9E%E0%B8%B1%E0%B8%92%E0%B8%99%E0%B8%B2%E0%B8%9C%E0%B8%A5%E0%B8%B4%E0%B8%95%E0%B8%A0%E0%B8%B1%E0%B8%93%E0%B8%91%E0%B9%8C%E0%B9%81%E0%B8%9A%E0%B8%9A-ChatGPT</id><content type="html" xml:base="https://wittawasw.com/2023/02/22/%E0%B8%95%E0%B9%89%E0%B8%99%E0%B8%97%E0%B8%B8%E0%B8%99%E0%B8%82%E0%B8%AD%E0%B8%87%E0%B8%9E%E0%B8%B1%E0%B8%92%E0%B8%99%E0%B8%B2%E0%B8%9C%E0%B8%A5%E0%B8%B4%E0%B8%95%E0%B8%A0%E0%B8%B1%E0%B8%93%E0%B8%91%E0%B9%8C%E0%B9%81%E0%B8%9A%E0%B8%9A-ChatGPT.html"><![CDATA[<p>มีโอกาสได้คุยเรื่องการนำ ChatGPT มาทำ use case เฉพาะใช้เองหลายครั้ง เป็นคุยจริงจังแบบโอกาสทำธุรกิจแค่ครั้งเดียว นอกนั้นเป็นคุยเล่นๆ แต่ทุกครั้ง ทุกกลุ่มที่ไปคุยให้ฟังก็ต้องอธิบายเรื่องนี้</p>

<p>ว่า ChatGPT มันมีต้นทุนสูงมาก มากจริงๆถ้าจะทำให้มันแม่นในระดับเดียวกับที่เค้าปล่อยให้เล่น มันไม่ใช่แค่การโยน text จากหนังสือใส่ลงไปใน GPT3 แล้วมันจะใช้งานได้เลย เพราะ ChatGPT มันทำงานได้ดีจากการใช้จำนวน Human Input มหาศาลในการสร้าง Reward Model ภายใน ลองคิดค่าใช้จ่ายดู เอาแบบเร็วๆ น่าจะต้องจ้างพนักงานเต็มเวลาอย่างน้อย 10-20 คน มานั่งคิด prompt แล้วก็คอยให้ feedback คำตอบของ AI  ประมาณ 0.5-1 ปี ถ้าออกมาดีก็มีทางไปต่อได้ ถ้าไม่ดีพอก็ต้องเลือกว่าจะหยุดเพื่อ cut loss เมื่อไหร่ นับว่าเป็นแผนธุรกิจที่มีความเสี่ยงสูงพอสมควร</p>

<p>ยกตัวอย่าง เช่น การทำโมเดล instructGPT เพื่อใช้ตอบคำถามในงานกฎหมาย ที่เกือบทุกคนจะมีความคิดประมาณว่า แค่ยัดประมวลแพ่ง ประมวลอาญาลงไปก็ใช้ได้ แต่ในความเป็นจริงเรื่องนี้ก็เป็นเรื่องยากและน่าจะต้องใช้ต้นทุนสูงกว่าโมเดลทั่วไปมาก โดยนอกจากจะต้องรองรับภาษาไทยแล้ว ยังมีเรื่องของ “ภาษากฎหมาย” ที่ในกฎหมายเก่า เช่น ประมวลต่างๆ จะใช้คำพูดที่ต่างกับชีวิตประจำวันโดยสิ้นเชิง การให้ feedback ของ prompt คิดว่าอย่างน้อยช่วงแรก ต้องให้คนทำ AI นั่งประกบกับนักกฎหมายช่วยกันทำไปก่อน ไม่สามารถปล่อยให้ฝ่ายใดฝ่ายหนึ่งทำคนเดียวได้ ซึ่งก็เท่ากับต้นทุนต้อง x2</p>

<p>สรุปก็คือ ต้องมีทุนที่เยอะพอและเป็นทุนที่ความเสี่ยงสูงด้วย ลองช่วยกันกับคนที่มาปรึกษานั่งทำ budget plan 3 ปีด้วยกัน ตกออกมาได้เฉลี่ยอย่างน้อยปีล่ะ 10-20 ล้านบาท สำหรับงานจริงจัง หรือปีล่ะ 1-3 ล้าน สำหรับงานเล็กๆ ใกล้เคียงกับ hobbyist</p>

<p>ถ้าเป็นเอกชนที่คิดจะพัฒนาเองเพื่อเอาไว้เป็น asset ของบริษัทก็ควรหาคนร่วมทุนหรือให้ทุนจะดีกว่า แต่มันก็ยากเพราะเราต้องบอกคนให้ทุนตั้งแต่ต้นว่าความเสี่ยงมันสูง ยกเว้นจะได้ระดับ SCB, Kbank ลงมาให้ทุนหรือทำเอง ก็คงไม่ต้องห่วงอะไร เพราะเงินจมไปร้อยล้านก็ไม่เดือดร้อน</p>]]></content><author><name>wittawasw</name><email>your-email@domain.com</email></author><category term="startup," /><category term="GPT" /><summary type="html"><![CDATA[มีโอกาสได้คุยเรื่องการนำ ChatGPT มาทำ use case เฉพาะใช้เองหลายครั้ง เป็นคุยจริงจังแบบโอกาสทำธุรกิจแค่ครั้งเดียว นอกนั้นเป็นคุยเล่นๆ แต่ทุกครั้ง ทุกกลุ่มที่ไปคุยให้ฟังก็ต้องอธิบายเรื่องนี้]]></summary></entry><entry><title type="html">การใช้ docker สำหรับเตรียมพื้นที่พัฒนาเว็บแอปพลิเคชัน</title><link href="https://wittawasw.com/2022/04/25/use-docker-in-local-web-application-development.html" rel="alternate" type="text/html" title="การใช้ docker สำหรับเตรียมพื้นที่พัฒนาเว็บแอปพลิเคชัน" /><published>2022-04-25T00:32:00+07:00</published><updated>2022-04-25T00:32:00+07:00</updated><id>https://wittawasw.com/2022/04/25/use-docker-in-local-web-application-development</id><content type="html" xml:base="https://wittawasw.com/2022/04/25/use-docker-in-local-web-application-development.html"><![CDATA[<p>การพัฒนาเว็บแอปพลิเคชันในปัจจุบัน มีความซับซ้อนและความต้องการทางเทคนิคที่เพิ่มขึ้นมาก
การพัฒนาจึงกลายเป็นการทำงานที่ต้องทำร่วมกันกับคนจำนวนมากขึ้น ไม่ได้จำกัดแค่คนกลุ่มเล็กเท่านั้น
แต่อาจหมายถึงการรวมกลุ่มทำงานในทีมที่อาจมีขนาดถึง 50-100 คน
การเตรียมชุดซอฟต์แวร์เพื่อให้ทีมงานจำนวนมากสามารถใช้ร่วมกันได้ โดยที่มีความใกล้เคียงกับพื้นที่จริงบน
production environment จึงกลายเป็นความจำเป็น ซึ่ง docker สามารถช่วยตอบโจทย์ความต้องการนี้ได้
ทว่าการใช้งาน docker จำเป็นต้องเข้าใจพื้นฐานการเชื่อมต่อ network เพื่อให้สามารถตั้งค่าการใช้งานภายในโรแกรมได้เอง ตามที่กำลังจะอธิบายต่อไปด้านล่าง</p>

<h2 id="การเชื่อมต่อผ่าน-docker-network">การเชื่อมต่อผ่าน docker network</h2>
<ul>
  <li>หากไม่มีการตั้งค่าเพิ่มเติม docker จะทำงานภายในเครือข่าย network ในรูปแบบของ <code class="language-plaintext highlighter-rouge">bridge mode</code>
network ที่ใช้ชื่อว่า <code class="language-plaintext highlighter-rouge">bridge</code>
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># คำสั่ง cli ที่ใช้ในการดูรายละเอียดของ docker network</span>

<span class="c"># ดูรายชื่อ docker network</span>
docker network <span class="nb">ls</span>

<span class="c"># ดูรายละเอียดของ docker network</span>
docker network inspect &lt;ชื่อของ network&gt;

<span class="c"># ดูรายละเอียดของ docker network ค่าเริ่มต้น</span>
docker network inspect bridge
</code></pre></div>    </div>
  </li>
  <li>การเชื่อมต่อผ่าน docker network ควรสร้าง network ชื่อเฉพาะของแต่ล่ะงานขึ้นมา
เพื่อแยกระบบออกจากการกันให้ชัดเจน
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ตัวอย่างการสร้าง network</span>

<span class="c"># สร้าง network ชื่อ myweb</span>
➜  ~ docker network create myweb
94e2714b100d6634299bbbc7dfb30bf7bc7d150e27f4f48764bec91d32d4686e

<span class="c"># ทดลองสร้าง container ขื่อ redis-store สำหรับ redis ขึ้นมาบน network ชื่อ myweb</span>
➜  ~ docker run <span class="nt">--name</span> redis-store <span class="nt">--network</span> myweb redis:6-alpine
1:C <span class="c"># oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo</span>
1:C <span class="c"># Redis version=6.2.6, bits=64, commit=00000000, modified=0, pid=1, just started</span>
1:C <span class="c"># Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf</span>
1:M <span class="k">*</span> monotonic clock: POSIX clock_gettime
1:M <span class="k">*</span> Running <span class="nv">mode</span><span class="o">=</span>standalone, <span class="nv">port</span><span class="o">=</span>6379.
1:M <span class="c"># Server initialized</span>
1:M <span class="k">*</span> Ready to accept connections

➜  ~ docker ps
CONTAINER ID   IMAGE            COMMAND                  CREATED              STATUS              PORTS      NAMES
cb67ff6bd900   redis:6-alpine   <span class="s2">"docker-entrypoint.s…"</span>   About a minute ago   Up About a minute   6379/tcp   redis-store

<span class="c"># ดูรายละเอียดของ docker network ค่าเริ่มต้น</span>
➜  ~ docker network inspect myweb
<span class="o">[</span>
    <span class="o">{</span>
        <span class="s2">"Name"</span>: <span class="s2">"myweb"</span>,
        <span class="nb">.</span>
        <span class="c"># ของจริงมีรายละเอียดเยอะกว่านี้แต่ย่อมาให้เห็นเฉพาะส่วนของ containers</span>
        <span class="nb">.</span>
        <span class="s2">"Containers"</span>: <span class="o">{</span>
            <span class="s2">"cb67ff6bd90061869639e950e908b169d830e54173d479c9ff2186597d2fd1b7"</span>: <span class="o">{</span>
                <span class="s2">"Name"</span>: <span class="s2">"redis-store"</span>,
                <span class="s2">"EndpointID"</span>: <span class="s2">"ed4aa0f9da01cbb7bfb7f6ae6a8eea8af8b58b5c66f16aef9b13831dc652fc22"</span>,
                <span class="s2">"MacAddress"</span>: <span class="s2">"02:42:ac:1b:00:02"</span>,
                <span class="s2">"IPv4Address"</span>: <span class="s2">"172.27.0.2/16"</span>,
                <span class="s2">"IPv6Address"</span>: <span class="s2">""</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">]</span>

</code></pre></div>    </div>
  </li>
  <li>จากตัวอย่างด้านบนจะเห็นได้ว่าเราสามารถเข้าถึง container ที่ชื่อว่า redis-store ได้ด้วย
IP address <code class="language-plaintext highlighter-rouge">172.27.0.2</code> แต่ทว่า IP address นี้จะเปลี่ยนไปทุกครั้งที่มีการ restart container
ดังนั้นการนำค่า IP Address ไปใช้งานโดยตรงจึงไม่ใช่เรื่องที่ดีนักเพราะเราต้องเสียเวลามาเปลี่ยน IP Address
อยู่เรื่อยๆ</li>
  <li>วิธีการที่ถูกต้องคือควรจะนำแอปพลิเคชันที่เรียกใช้ redis ใส่ไว้ใน network ที่ชื่อ myweb ด้วย
และภายใน code ที่ทำการเชื่อมต่อก็ใช้ชื่อของ container แทน hostname, IP address ได้เลย
ในตัวอย่างนี้ code ที่ทำการเชื่อต่อ redis จะสามารถเชื่อมต่อกับ redis ผ่านตัวอย่าง URL ต่อไปนี้ได้
    <ul>
      <li><code class="language-plaintext highlighter-rouge">redis://172.27.0.2:6379</code>  <em>(ใช้ IP Address โดยตรงก็ได้แต่เป็นวิธีที่ไม่แนะนำ)</em></li>
      <li><code class="language-plaintext highlighter-rouge">redis://redis-store:6379</code>  <em>(ควรใช้ชื่อ container แทน hostname)</em></li>
    </ul>
  </li>
  <li>หากในขั้นตอนด้านบน ไม่ได้ทำการสร้าง network และใช้ network ชื่อ <code class="language-plaintext highlighter-rouge">bridge</code> ตามค่าเริ่มต้น
การใช้ชื่อ container แทน hostname แบบ <code class="language-plaintext highlighter-rouge">redis://redis-store:6379</code> จะไม่สามารถทำได้</li>
</ul>

<h2 id="การเข้าถึง-container-ด้วย-port-mapping">การเข้าถึง container ด้วย port mapping</h2>
<ul>
  <li>ในกรณีที่เราต้องการเข้าถึงผ่าน <code class="language-plaintext highlighter-rouge">localhost</code> หรือ <code class="language-plaintext highlighter-rouge">127.0.0.1</code> เราสามารใช้ใช้ option -p เพื่อทำการ
port mapping ออกมาจาก docker network
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># แอปพลิเคชันที่อยู่ภายใน localhost จะสามารถเชื่อต่อได้ผ่าน redis://localhost:6379</span>
docker run <span class="nt">--name</span> redis-store <span class="nt">--network</span> myweb <span class="nt">-p</span> 127.0.0.1:6379:6379/tcp redis:6-alpine

<span class="c"># /tcp อนุโลมให้ไม่ใส่ได้เพราะค่าเริ่มต้นคือ tcp อยู่แล้ว และอีก protocol ที่ชื่อ udp ก็ไม่เป็นที่นิยมใช้</span>
docker run <span class="nt">--name</span> redis-store <span class="nt">--network</span> myweb <span class="nt">-p</span> 127.0.0.1:6379:6379 redis:6-alpine
</code></pre></div>    </div>
  </li>
  <li>จะสังเกตได้ว่าเราทำการ map ให้เข้ากับ host <code class="language-plaintext highlighter-rouge">127.0.0.1</code>
ซึ่งข้อผิดพลาดหรือความไม่ระวังอย่างหนึ่งที่พบได้บ่อยคือการใช้ option -p โดยไม่ระบุ host
ทำให้ container สามารถถูกเข้าถึงได้จาก host ภายนอกทั้งหมด
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># สังเกตตรง -p 6379:6379 ซึ่งเป็นลักษณะที่ไม่พึงประสงค์ ควรใช้ก็ต่อเมื่อเข้าใจความเสี่ยงเท่านั้น</span>
docker run <span class="nt">--name</span> redis-store <span class="nt">--network</span> myweb <span class="nt">-p</span> 6379:6379 redis:6-alpine
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="บันทึกและติดตามการเปลี่ยนแปลงการตั้งค่า-docker-ด้วย-docker-compose">บันทึกและติดตามการเปลี่ยนแปลงการตั้งค่า docker ด้วย docker-compose</h2>
<ul>
  <li>การทำเว็บแอปพลิเคชัน องค์ประกอบจะเพิ่มความซับซ้อนมากขึ้นเรื่อยๆ ตามความต้องการของแอปพลิเชัน
ซึ่งทำให้การตั้งค่า docker ก็ต้องมีการบันทึกเก็บไว้ใน version control
เพื่อให้สามารถติดตามการเปลี่ยนแปลงได้</li>
  <li>
    <p>docker-compose ไม่ได้เป็นเพียงรูปแบบที่ช่วยบันทึก แต่เรายังสามารถเรียกใช้งานทุกองค์ประกอบได้โดยที่ไม่ต้อง
<code class="language-plaintext highlighter-rouge">docker run</code> ทีล่ะ container ลดความยุ่งยากในการจำตัวเลือกการตั้งค่าต่างๆเหลือเพียงให้จำเพียงชื่อ
service ของ container เท่านั้น</p>

    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># docker-compose.yml</span>
<span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3'</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="na">build</span><span class="pi">:</span>
      <span class="na">context</span><span class="pi">:</span> <span class="s">.</span>
      <span class="na">dockerfile</span><span class="pi">:</span> <span class="s">./Dockerfile</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">8080:8080</span> <span class="c1"># port mapping เพื่อให้สามารถใช้ localhost:8080 แทน internal IP ได้</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">.:/var/www/html</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">REDIS_URL=redis://redis:6379</span>
    <span class="na">networks</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">myweb</span>
  <span class="na">redis</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s1">'</span><span class="s">redis:6-alpine'</span>
    <span class="c1"># ใช้สัญลักษณ์ # ในการ comment เพื่อให้ docker-compose ไม่อ่านค่า</span>
    <span class="c1"># comment port mapping ออก โดยสามารถนำเครื่องหมาย # ข้างหน้าออกเพื่อเปิดใช้งานได้ในกรณี</span>
    <span class="c1"># ที่ต้องการ debug</span>
    <span class="c1"># ports:</span>
    <span class="c1">#  - 6379:6379</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">ALLOW_EMPTY_PASSWORD=yes</span>
    <span class="na">networks</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">myweb</span>

<span class="na">networks</span><span class="pi">:</span>
  <span class="na">myweb</span><span class="pi">:</span>
    <span class="na">driver</span><span class="pi">:</span> <span class="s">bridge</span>
</code></pre></div>    </div>
  </li>
  <li>สามารถตั้งค่า docker network จากภายในไฟล์ <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> ได้เลย
โดยไม่จำเป็นต้องสร้าง network ด้วยคำสั่ง <code class="language-plaintext highlighter-rouge">docker network create &lt;ชื่อ network&gt;</code> เอาไว้ก่อน</li>
  <li>แต่หากต้องการใช้ network ที่ไม่ได้สร้างจากภายในไฟล์ <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> จำเป็นต้องระบุว่าเป็น
external network ตามรูปแบบนี้
    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># docker-compose.yml</span>

<span class="na">networks</span><span class="pi">:</span>
  <span class="na">external</span><span class="pi">:</span>
    <span class="na">myweb</span><span class="pi">:</span>
      <span class="na">driver</span><span class="pi">:</span> <span class="s">bridge</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>การใช้งานผ่าน docker-compose จะทำให้การเชื่อมต่อ redis จากภายใน code ของ container web
สามารถใช้ชื่อ service <code class="language-plaintext highlighter-rouge">redis</code> แทน hostname ได้เลย เช่น <code class="language-plaintext highlighter-rouge">redis://redis:6379</code> ทำให้ไม่มีความจำเป็นต้องจำชื่อ container  อีกต่อไป</p>
  </li>
  <li>การเรียกใช้งานเบื้องต้น
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># เรียกใช้งานในรูปแบบ active process สามารถ kill โดยการกด ctrl-C หรือ ปิด terminal ได้</span>
docker-compose up

<span class="c"># เรียกใช้งานในรูปแบบ daemon process</span>
docker-compose up <span class="nt">-d</span>

<span class="c"># ตัวอย่างการเรียกใช้งานเฉพาะบาง service</span>
docker-compose up web
docker-compose up redis

<span class="c"># ตัวอย่างการเรียกใช้งานหลาย service แบบเจาะจง</span>
docker-compose up web redis
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="environment-variables-จากไฟล์-env">Environment Variables จากไฟล์ .env</h2>
<ul>
  <li>คำสั่ง docker-compose จะอ่านค่าจากไฟล์ <code class="language-plaintext highlighter-rouge">.env</code> โดยอัตโนมัติ
ทำให้ไม่จำเป็นต้องใส่ค่าบางค่า ที่ผู้พัฒนาบางคนอาจใช้ไม่ตรงกันได้ เช่น port ของแอปพลิเคชัน
หรือ ชื่อของ network ที่ใช้</li>
  <li>การใช้ค่าจาก Environment variables ภายใน code เป็นแนวทางที่ถูกแนะนำภายใต้หลักการ
<a href="https://12factor.net/">12-factor</a> เพื่อให้การ deploy เว็บแอปพลิเคชัน สามารถแยกตาม
environment ได้</li>
</ul>

<pre><code class="language-.env"># .env
EXPOSED_WEB_PORT=8080
WEB_DIRECTORY=.
REDIS_HOSTNAME=redis
EXPOSED_REDIS_PORT=6379
MY_WEB_NETWORK_NAME=myweb
</code></pre>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># docker-compose.yml</span>

  <span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3'</span>
  <span class="na">services</span><span class="pi">:</span>
    <span class="na">web</span><span class="pi">:</span>
      <span class="na">build</span><span class="pi">:</span>
        <span class="na">context</span><span class="pi">:</span> <span class="s">.</span>
        <span class="na">dockerfile</span><span class="pi">:</span> <span class="s">./Dockerfile</span>
      <span class="na">ports</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">${EXPOSED_WEB_PORT}:8080</span>
      <span class="na">volumes</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">${WEB_DIRECTORY}:/var/www/html</span>
      <span class="na">environment</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">REDIS_URL=redis://${REDIS_HOSTNAME}:${EXPOSED_REDIS_PORT}</span>
      <span class="na">networks</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">myweb</span>
    <span class="na">redis</span><span class="pi">:</span>
      <span class="na">image</span><span class="pi">:</span> <span class="s1">'</span><span class="s">redis:6-alpine'</span>
      <span class="c1"># ports:</span>
      <span class="c1">#  - ${EXPOSED_REDIS_PORT}:6379</span>
      <span class="na">environment</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">ALLOW_EMPTY_PASSWORD=yes</span>
      <span class="na">networks</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">myweb</span>

  <span class="na">networks</span><span class="pi">:</span>
    <span class="na">myweb</span><span class="pi">:</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">${MY_WEB_NETWORK_NAME}</span>
      <span class="na">driver</span><span class="pi">:</span> <span class="s">bridge</span>
</code></pre></div></div>]]></content><author><name>wittawasw</name><email>your-email@domain.com</email></author><summary type="html"><![CDATA[การพัฒนาเว็บแอปพลิเคชันในปัจจุบัน มีความซับซ้อนและความต้องการทางเทคนิคที่เพิ่มขึ้นมาก การพัฒนาจึงกลายเป็นการทำงานที่ต้องทำร่วมกันกับคนจำนวนมากขึ้น ไม่ได้จำกัดแค่คนกลุ่มเล็กเท่านั้น แต่อาจหมายถึงการรวมกลุ่มทำงานในทีมที่อาจมีขนาดถึง 50-100 คน การเตรียมชุดซอฟต์แวร์เพื่อให้ทีมงานจำนวนมากสามารถใช้ร่วมกันได้ โดยที่มีความใกล้เคียงกับพื้นที่จริงบน production environment จึงกลายเป็นความจำเป็น ซึ่ง docker สามารถช่วยตอบโจทย์ความต้องการนี้ได้ ทว่าการใช้งาน docker จำเป็นต้องเข้าใจพื้นฐานการเชื่อมต่อ network เพื่อให้สามารถตั้งค่าการใช้งานภายในโรแกรมได้เอง ตามที่กำลังจะอธิบายต่อไปด้านล่าง]]></summary></entry></feed>